<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!--                                             -->
<!-- Author: ROOT team (rootdev@hpsalo.cern.ch)  -->
<!--                                             -->
<!--   Date: Fri Dec 20 16:02:25 2002            -->
<!--                                             -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>PidSystem - source file</title>
<link rev=made href="mailto:rootdev@root.cern.ch">
<meta name="rating" content="General">
<meta name="objecttype" content="Manual">
<meta name="keywords" content="software development, oo, object oriented, unix, x11, windows, c++, html, rene brun, fons rademakers">
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis.">
</head>
<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#551a8b" ALINK="#ff0000" TEXT="#000000">
<a name="TopOfPage"></a>
<pre>
<b>//--------------------------------------------------------------------------</b>
<b>//</b>
<b>// Environment:</b>
<b>//	Software developed for the BaBar Detector at the SLAC B-Factory.</b>
<b>//</b>
<b>// Author List:</b>
<b>//      Stefan Kluth</b>
<b>//      Leif Wilden</b>
<b>//</b>
<b>// Copyright Information:</b>
<b>//	Copyright (C) 1999      LBNL, TU Dresden</b>
<b>//</b>
<b>//------------------------------------------------------------------------</b>

#include "KangaSchema/TBtaPidInfoR.h"
#include "KangaSchema/kanga.h"

#include &lt;assert.h&gt;

#include "TBuffer.h"

ClassImp(PidSystem)
ClassImp(TBtaPidInfoR)

TBuffer &amp;operator&gt;&gt;(TBuffer &amp;buf, TBtaPidInfoR *&amp;obj)
{
   obj = (TBtaPidInfoR *) buf.ReadObject(TBtaPidInfoR::Class());
   return buf;
}

ComPackUFloat TBtaPidInfoR::packer(FRACLEN,EXPLEN,BIAS);

TBtaPidInfoR::TBtaPidInfoR()
{
  Reset();
}

TBtaPidInfoR::~TBtaPidInfoR() {}

void TBtaPidInfoR::Reset()
{
  for (int j1=0;j1&lt;5;j1++){ 
    for (int j2=0;j2&lt;5;j2++) _Cons[j1+j2*5]= 0;
    _status[j1+0*5]= 0;
    _status[j1+1*5]= 0;
    _status[j1+2*5]= 0;
  }
  _nent= 0;
  for( unsigned i= 0; i &lt; NCHENT; i++ ) {
    _coValues[i]= 0.0;
    _coLhoods[i]= 0.0;
    _coBits[i]= 0;
  }
}

TBtaPidInfoR &amp; TBtaPidInfoR::operator = ( const TBtaPidInfoR &amp; rhs ) {

  _nent= rhs._nent;
  for( unsigned i= 0; i &lt; _nent; i++ ) {
    _coValues[i]= rhs._coValues[i];
    _coLhoods[i]= rhs._coLhoods[i];
    _coBits[i]= rhs._coBits[i];
  }
  return *this;

}

<b>// Stream an object of class <a href=".././TBtaPidInfoR.html">TBtaPidInfoR</a>. This replaces rootcint generated</b>
<b>// code in order to use Write- and ReadFastArray to avoid reading lots of </b>
<b>// 0s in case of neutrals:</b>
<a href="../ListOfTypes.html#void">void</a> <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:Streamer">TBtaPidInfoR::Streamer</a>( TBuffer &amp; R__b ) {

   if( R__b.IsReading() ) {
      <a href="../ListOfTypes.html#Version_t">Version_t</a> R__v= R__b.ReadVersion(); 
<b>      // if (R__v) { }</b>
      R__b &gt;&gt; _nent;
      R__b.ReadFastArray( _coValues, _nent );
      R__b.ReadFastArray( _coLhoods, _nent );
      R__b.ReadFastArray( _coBits, _nent );
   } 
   else {
      R__b.WriteVersion( <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:IsA">TBtaPidInfoR::IsA</a>() );
      R__b &lt;&lt; _nent;
      R__b.WriteFastArray( _coValues, _nent );
      R__b.WriteFastArray( _coLhoods, _nent );
      R__b.WriteFastArray( _coBits, _nent );
   }

}

<b>// Getters:</b>

<a href="../ListOfTypes.html#UShort_t">UShort_t</a> <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:GetNent">TBtaPidInfoR::GetNent</a>() const
{
  <a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:Instance">TBtaMicroCandRDir::Instance</a>()-&gt;ReadBranch(<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:pi_nent">TBtaMicroCandRDir::pi_nent</a>);
  return _nent;
}

<a href="../ListOfTypes.html#void">void</a> <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:GetCoValues">TBtaPidInfoR::GetCoValues</a>(<a href="../ListOfTypes.html#Float_t">Float_t</a> values[NCHENT]) const
{
  <a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:Instance">TBtaMicroCandRDir::Instance</a>()-&gt;ReadBranch(<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:pi_coValues">TBtaMicroCandRDir::pi_coValues</a>);
  for (<a href="../ListOfTypes.html#Int_t">Int_t</a> i= 0; i&lt;NCHENT; i++) values[i]= _coValues[i];
}

<a href="../ListOfTypes.html#void">void</a> <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:GetCoLhoods">TBtaPidInfoR::GetCoLhoods</a>(<a href="../ListOfTypes.html#Float_t">Float_t</a> lhoods[NCHENT]) const
{
  <a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:Instance">TBtaMicroCandRDir::Instance</a>()-&gt;ReadBranch(<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:pi_coLhoods">TBtaMicroCandRDir::pi_coLhoods</a>);
  for (<a href="../ListOfTypes.html#Int_t">Int_t</a> i= 0; i&lt;NCHENT; i++) lhoods[i]= _coLhoods[i];
}

<a href="../ListOfTypes.html#void">void</a> <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:GetCoBits">TBtaPidInfoR::GetCoBits</a>(<a href="../ListOfTypes.html#UChar_t">UChar_t</a> bits[NCHENT]) const
{
  <a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:Instance">TBtaMicroCandRDir::Instance</a>()-&gt;ReadBranch(<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:pi_coBits">TBtaMicroCandRDir::pi_coBits</a>);
  for (<a href="../ListOfTypes.html#Int_t">Int_t</a> i= 0; i&lt;NCHENT; i++) bits[i]= _coBits[i];
}

<a href="../ListOfTypes.html#void">void</a> <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:SetCoValues">TBtaPidInfoR::SetCoValues</a>(const <a href="../ListOfTypes.html#Float_t">Float_t</a> values[NCHENT])
{
  for (<a href="../ListOfTypes.html#Int_t">Int_t</a> i= 0; i&lt;NCHENT; i++) _coValues[i]= values[i];
}

<a href="../ListOfTypes.html#void">void</a> <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:SetCoLhoods">TBtaPidInfoR::SetCoLhoods</a>(const <a href="../ListOfTypes.html#Float_t">Float_t</a> lhoods[NCHENT])
{
  for (<a href="../ListOfTypes.html#Int_t">Int_t</a> i= 0; i&lt;NCHENT; i++) _coLhoods[i]= lhoods[i];
}

<b>// Setters:</b>

<a href="../ListOfTypes.html#void">void</a> <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:SetCoBits">TBtaPidInfoR::SetCoBits</a>(const <a href="../ListOfTypes.html#UChar_t">UChar_t</a> bits[NCHENT])
{
  for (<a href="../ListOfTypes.html#Int_t">Int_t</a> i= 0; i&lt;NCHENT; i++) _coBits[i]= bits[i];
}


<a href="../ListOfTypes.html#Float_t">Float_t</a>* <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:GetConsistency">TBtaPidInfoR::GetConsistency</a>(<a href=".././PidSystem.html#PidSystem:System">PidSystem::System</a> sys)
{
    if (<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:GetSchema">TBtaMicroCandRDir::GetSchema</a>()&gt;3) {
	<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:Instance">TBtaMicroCandRDir::Instance</a>()-&gt;ReadBranch(<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:pi_status">TBtaMicroCandRDir::pi_status</a>);
	<a href="../ListOfTypes.html#d_UShort">d_UShort</a> status;
	for(<a href="../ListOfTypes.html#int">int</a> j=0;j&lt;5;j++) {
	    switch (sys) {
	      case <a href=".././PidSystem.html#PidSystem:dch">PidSystem::dch</a>: status = _status [j+0*5]&amp; 0xf; break;
	      case <a href=".././PidSystem.html#PidSystem:svt">PidSystem::svt</a>: status = (_status[j+0*5]&gt;&gt;4)&amp; 0xf; break;
	      case <a href=".././PidSystem.html#PidSystem:drc">PidSystem::drc</a>: status = _status [j+1*5]&amp; 0xf; break;
	      case <a href=".././PidSystem.html#PidSystem:emc">PidSystem::emc</a>: status = (_status[j+1*5]&gt;&gt;4)&amp; 0xf; break;
	      case <a href=".././PidSystem.html#PidSystem:ifr">PidSystem::ifr</a>: status = _status [j+2*5]&amp; 0xf; break;
	    }
	    <a href="../ListOfTypes.html#double">double</a> value;
	    packer.unpack(status&amp;0xfff,value);
	    _coValues[5*sys+j] = value;
	}
    }
    return &amp;_coValues[5*sys];
}

<a href="../ListOfTypes.html#Float_t">Float_t</a>* <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:GetLikelihood">TBtaPidInfoR::GetLikelihood</a>(<a href=".././PidSystem.html#PidSystem:System">PidSystem::System</a> sys)
{
    if (<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:GetSchema">TBtaMicroCandRDir::GetSchema</a>()&gt;3) {
	<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:Instance">TBtaMicroCandRDir::Instance</a>()-&gt;ReadBranch(<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:pi_cons">TBtaMicroCandRDir::pi_cons</a>);
	<a href="../ListOfTypes.html#d_UShort">d_UShort</a> cons;
	for(<a href="../ListOfTypes.html#int">int</a> j=0;j&lt;5;j++) {
	    switch (sys) {
	      case <a href=".././PidSystem.html#PidSystem:dch">PidSystem::dch</a>: cons = _Cons[j+0*5]; break;
	      case <a href=".././PidSystem.html#PidSystem:svt">PidSystem::svt</a>: cons = _Cons[j+1*5]; break;
	      case <a href=".././PidSystem.html#PidSystem:drc">PidSystem::drc</a>: cons = _Cons[j+2*5]; break;
	      case <a href=".././PidSystem.html#PidSystem:emc">PidSystem::emc</a>: cons = _Cons[j+3*5]; break;
	      case <a href=".././PidSystem.html#PidSystem:ifr">PidSystem::ifr</a>: cons = _Cons[j+4*5]; break;
	    }
	    <a href="../ListOfTypes.html#double">double</a> value;
	    packer.unpack(cons&amp;0xfff,value);
	    _coLhoods[5*sys+j] = value;
	}
    }
    return &amp;_coLhoods[5*sys];
}

<a href="../ListOfTypes.html#UChar_t">UChar_t</a>* <a href=".././TBtaPidInfoR.html#TBtaPidInfoR:GetStatus">TBtaPidInfoR::GetStatus</a>(<a href=".././PidSystem.html#PidSystem:System">PidSystem::System</a> sys)
{
    if (<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:GetSchema">TBtaMicroCandRDir::GetSchema</a>()&gt;3) {
	<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:Instance">TBtaMicroCandRDir::Instance</a>()-&gt;ReadBranch(<a href=".././TBtaMicroCandRDir.html#TBtaMicroCandRDir:pi_status">TBtaMicroCandRDir::pi_status</a>);
	<a href="../ListOfTypes.html#d_UShort">d_UShort</a> status;
	for(<a href="../ListOfTypes.html#int">int</a> j=0;j&lt;5;j++) {
	    switch (sys) {
	      case <a href=".././PidSystem.html#PidSystem:dch">PidSystem::dch</a>: status = _status [j+0*5]&amp; 0xf; break;
	      case <a href=".././PidSystem.html#PidSystem:svt">PidSystem::svt</a>: status = (_status[j+0*5]&gt;&gt;4)&amp; 0xf; break;
	      case <a href=".././PidSystem.html#PidSystem:drc">PidSystem::drc</a>: status = _status [j+1*5]&amp; 0xf; break;
	      case <a href=".././PidSystem.html#PidSystem:emc">PidSystem::emc</a>: status = (_status[j+1*5]&gt;&gt;4)&amp; 0xf; break;
	      case <a href=".././PidSystem.html#PidSystem:ifr">PidSystem::ifr</a>: status = _status [j+2*5]&amp; 0xf; break;
	    }
	    _coBits[5*sys+j] = status&gt;&gt;12;
	}
    }
    return &amp;_coBits[5*sys];
}
</pre>

<!--SIGNATURE-->
<br>
<hr>
<center>
<address>
<a href="http://root.cern.ch/root/Welcome.html">ROOT page</a> - <a href="../ClassIndex.html">Class index</a> - <a href="#TopOfPage">Top of the page</a><br>
</address>
</center>
<hr>
<address>
This page has been automatically generated. If you have any comments or suggestions about the page layout send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>, or contact <a href="mailto:rootdev@root.cern.ch">the developers</a> with any questions or problems regarding ROOT.
</address>
</body>
</html>
