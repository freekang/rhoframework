<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!--                                             -->
<!-- Author: ROOT team (rootdev@hpsalo.cern.ch)  -->
<!--                                             -->
<!--   Date: Fri Dec 20 16:03:33 2002            -->
<!--                                             -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>TVectorErr - source file</title>
<link rev=made href="mailto:rootdev@root.cern.ch">
<meta name="rating" content="General">
<meta name="objecttype" content="Manual">
<meta name="keywords" content="software development, oo, object oriented, unix, x11, windows, c++, html, rene brun, fons rademakers">
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis.">
</head>
<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#551a8b" ALINK="#ff0000" TEXT="#000000">
<a name="TopOfPage"></a>
<pre>
<b>//////////////////////////////////////////////////////////////////////////</b>
<b>//                                                                      //</b>
<b>// <a href=".././TVectorErr.html">TVectorErr</a>		    						//</b>
<b>//                                                                      //</b>
<b>// Vector w/ error class						//</b>
<b>//                                                                      //</b>
<b>// Author: Marcel Kunze, RUB, Nov. 99					//</b>
<b>// Copyright (C) 1999-2001, Ruhr-University Bochum.			//</b>
<b>//                                                                      //</b>
<b>//////////////////////////////////////////////////////////////////////////</b>

#include "RhoMath/TVectorErr.h"
#include &lt;float.h&gt;

ClassImp(TVectorErr)

TBuffer &amp;operator&gt;&gt;(TBuffer &amp;buf, TVectorErr *&amp;obj)
{
   obj = (TVectorErr *) buf.ReadObject(TVectorErr::Class());
   return buf;
}

#include &lt;iostream&gt;
using namespace std;

<a name="TVectorErr:TVectorErr"> </a>TVectorErr::TVectorErr() : TVector3(), fCovMatrix(3) {}

<b>// auto casting constructor</b>
<a name="TVectorErr:TVectorErr"> </a><a href=".././TVectorErr.html#TVectorErr:TVectorErr">TVectorErr::TVectorErr</a>(const TVector3 &amp;p) : TVector3(p), <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a>(3)	{}
<a name="TVectorErr:TVectorErr"> </a><a href=".././TVectorErr.html#TVectorErr:TVectorErr">TVectorErr::TVectorErr</a>(const TVector3 &amp;p, const <a href=".././TError.html">TError</a>&amp; covMat) : TVector3(p),
<a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a>(3)				{ <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a>=covMat; }

<b>// copy constructor:</b>
<a name="TVectorErr:TVectorErr"> </a><a href=".././TVectorErr.html#TVectorErr:TVectorErr">TVectorErr::TVectorErr</a>(const <a href=".././TVectorErr.html">TVectorErr</a>&amp; v) : TVector3(v),
<a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a>(v.<a href="#TVectorErr:CovMatrix">CovMatrix</a>())	{}

<b>// destructor MAY be needed later</b>
<b>// virtual ~<a href=".././TVectorErr.html">TVectorErr</a>() {};</b>

<b>// assignment operator:</b>
<a href=".././TVectorErr.html">TVectorErr</a>&amp; <a href=".././TVectorErr.html#TVectorErr:operator">TVectorErr::operator</a>=(const <a href=".././TVectorErr.html">TVectorErr</a>&amp; v)
{
    if (this != &amp;v) {
	TVector3::operator=(v);
	<a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a> = v.<a href="#TVectorErr:CovMatrix">CovMatrix</a>();
    }
    return *this;
}

<a href=".././TVectorErr.html">TVectorErr</a>&amp; <a href=".././TVectorErr.html#TVectorErr:operator">TVectorErr::operator</a> - () {
    (*this) *= -1.;
    return *this;  // <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a> remains unaltered
}

<a href=".././TVectorErr.html">TVectorErr</a>&amp; <a href=".././TVectorErr.html#TVectorErr:operator">TVectorErr::operator</a> += (const <a href=".././TVectorErr.html">TVectorErr</a>&amp; v){
    TVector3::operator+=(v);
    <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a> += v.<a href="#TVectorErr:CovMatrix">CovMatrix</a>();
    return *this;
}

<a href=".././TVectorErr.html">TVectorErr</a>&amp; <a href=".././TVectorErr.html#TVectorErr:operator">TVectorErr::operator</a> -= (const <a href=".././TVectorErr.html">TVectorErr</a>&amp; v){
    TVector3::operator-=(v);
    <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a> += v.<a href="#TVectorErr:CovMatrix">CovMatrix</a>();
    return *this;
}

<a name="TVectorErr:Transform"> </a><a href=".././TVectorErr.html">TVectorErr</a>&amp; <a href=".././TVectorErr.html#TVectorErr:Transform">TVectorErr::Transform</a>(const TRotation&amp; rot){
    TVector3::<a href="#TVectorErr:Transform">Transform</a>(rot);
    <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a> = <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a>.<a href=".././TError.html#TError:Similarity">Similarity</a>(rot);
    return *this;
}

<b>//<a href="../ListOfTypes.html#void">void</a> <a href=".././TVectorErr.html#TVectorErr:printOn">TVectorErr::printOn</a>(ostream&amp; out) const</b>
<b>//{</b>
<b>//    out &lt;&lt; "TVector and Covariance Matrix:" &lt;&lt; endl;</b>
<b>//    TVector::printOn(out);</b>
<b>//    out &lt;&lt; endl;</b>
<b>//    out &lt;&lt; <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a>;</b>
<b>//}</b>
/* 
<a href=".././TError.html">TError</a> <a href=".././TVectorErr.html#TVectorErr:covRTPMatrix">TVectorErr::covRTPMatrix</a>() const{
<b>// protect against 0's</b>
<a href="../ListOfTypes.html#Double_t">Double_t</a> xv = X()==0 ?  FLT_MIN : X();
<a href="../ListOfTypes.html#Double_t">Double_t</a> yv = Y()==0 ?  FLT_MIN : Y();
<a href="../ListOfTypes.html#Double_t">Double_t</a> zv = Z()==0 ?  FLT_MIN : Z();
DifNumber xDF(xv,X+1,3), yDF(yv,Y+1,3), zDF(zv,Z+1,3);
DifArray pars(3,<a href=".././TVectorErr.html#TVectorErr:NUM_PCOORDINATES">NUM_PCOORDINATES</a>);
pars[<a href=".././TVectorErr.html#TVectorErr:Rho">Rho</a>]   =  sqrt(xDF*xDF + yDF*yDF + zDF*zDF);
pars[<a href=".././TVectorErr.html#TVectorErr:Phi">Phi</a>]   = atan2(yDF,xDF);
pars[<a href=".././TVectorErr.html#TVectorErr:Theta">Theta</a>] = acos(zDF/pars[<a href=".././TVectorErr.html#TVectorErr:Rho">Rho</a>]);
return covMatrix().Similarity(pars.jacobian());
}

  <a href=".././TError.html">TError</a> <a href=".././TVectorErr.html#TVectorErr:covRZPMatrix">TVectorErr::covRZPMatrix</a>() const{
<b>  // protect against 0's</b>
  <a href="../ListOfTypes.html#Double_t">Double_t</a> xv = X()==0 ?  FLT_MIN : X();
  <a href="../ListOfTypes.html#Double_t">Double_t</a> yv = Y()==0 ?  FLT_MIN : Y();
  <a href="../ListOfTypes.html#Double_t">Double_t</a> zv = Z()==0 ?  FLT_MIN : Z();
  DifNumber xDF(xv,X+1,3), yDF(yv,Y+1,3), zDF(zv,Z+1,3);
  DifArray pars(3,<a href=".././TVectorErr.html#TVectorErr:NUM_CCOORDINATES">NUM_CCOORDINATES</a>);
  pars[<a href=".././TVectorErr.html#TVectorErr:C_Rho">C_Rho</a>]   =  sqrt(xDF*xDF + yDF*yDF);
  pars[<a href=".././TVectorErr.html#TVectorErr:C_Phi">C_Phi</a>]   = atan2(yDF,xDF);
  pars[<a href=".././TVectorErr.html#TVectorErr:C_Zeta">C_Zeta</a>] = zDF;
  return covMatrix().Similarity(pars.jacobian());
  }
*/
<a name="TVectorErr:DetermineChisq"> </a><a href="../ListOfTypes.html#Double_t">Double_t</a> <a href=".././TVectorErr.html#TVectorErr:DetermineChisq">TVectorErr::DetermineChisq</a>(const TVector3&amp; refVector)
{
    static TVectorD temp(3);
    temp(0) = refVector.X()-this-&gt;X();
    temp(1) = refVector.Y()-this-&gt;Y();
    temp(2) = refVector.Z()-this-&gt;Z();
    return <a href=".././TVectorErr.html#TVectorErr:fCovMatrix">fCovMatrix</a>.<a href=".././TError.html#TError:DetermineChisq">DetermineChisq</a>(temp);
}


<a href=".././TVectorErr.html">TVectorErr</a> operator + (const <a href=".././TVectorErr.html">TVectorErr</a>&amp; v, const <a href=".././TVectorErr.html">TVectorErr</a>&amp; w){
    <a href=".././TVectorErr.html">TVectorErr</a> ve(TVector3(v.X()+w.X(),v.Y()+w.Y(),v.Z()+w.Z()),
	(v.<a href="#TVectorErr:CovMatrix">CovMatrix</a>()+w.<a href="#TVectorErr:CovMatrix">CovMatrix</a>()));
    return ve;
}

<a href=".././TVectorErr.html">TVectorErr</a> operator - (const <a href=".././TVectorErr.html">TVectorErr</a>&amp; v, const <a href=".././TVectorErr.html">TVectorErr</a>&amp; w){
    <a href=".././TVectorErr.html">TVectorErr</a> ve(TVector3(v.X()-w.X(),v.Y()-w.Y(),v.Z()-w.Z()), 
	(v.<a href="#TVectorErr:CovMatrix">CovMatrix</a>()+w.<a href="#TVectorErr:CovMatrix">CovMatrix</a>()));
    return ve;
}





std::ostream &amp; operator&lt;&lt;(std::ostream &amp; stream, const <a href=".././TVectorErr.html">TVectorErr</a> &amp; verr) {
    stream &lt;&lt; (const TVector3&amp;)verr
	&lt;&lt; ", " &lt;&lt; verr.<a href="#TVectorErr:CovMatrix">CovMatrix</a>();
    
    return stream;
}

std::istream &amp; operator&gt;&gt;(std::istream &amp; stream, <a href=".././TVectorErr.html">TVectorErr</a> &amp; verr) {
    <a href=".././TError.html">TError</a> mat(3);
    stream &gt;&gt; verr &gt;&gt; mat;
    verr.<a href="#TVectorErr:SetCovMatrix">SetCovMatrix</a>(mat);
    
    return stream;
}

</pre>

<!--SIGNATURE-->
<br>
<hr>
<center>
<address>
<a href="http://root.cern.ch/root/Welcome.html">ROOT page</a> - <a href="../ClassIndex.html">Class index</a> - <a href="#TopOfPage">Top of the page</a><br>
</address>
</center>
<hr>
<address>
This page has been automatically generated. If you have any comments or suggestions about the page layout send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>, or contact <a href="mailto:rootdev@root.cern.ch">the developers</a> with any questions or problems regarding ROOT.
</address>
</body>
</html>
