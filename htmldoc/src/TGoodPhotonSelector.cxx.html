<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!--                                             -->
<!-- Author: ROOT team (rootdev@hpsalo.cern.ch)  -->
<!--                                             -->
<!--   Date: Fri Dec 20 16:02:59 2002            -->
<!--                                             -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>TGoodPhotonSelector - source file</title>
<link rev=made href="mailto:rootdev@root.cern.ch">
<meta name="rating" content="General">
<meta name="objecttype" content="Manual">
<meta name="keywords" content="software development, oo, object oriented, unix, x11, windows, c++, html, rene brun, fons rademakers">
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis.">
</head>
<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#551a8b" ALINK="#ff0000" TEXT="#000000">
<a name="TopOfPage"></a>
<pre>
<b>//////////////////////////////////////////////////////////////////////////</b>
<b>//                                                                      //</b>
<b>// <a href=".././TGoodPhotonSelector.html">TGoodPhotonSelector</a>						        //</b>
<b>//                                                                      //</b>
<b>// Selector classes for particle selection                              //</b>
<b>//                                                                      //</b>
<b>// Author List:                                                         //</b>
<b>// Marcel Kunze,  RUB, Feb. 99                                          //</b>
<b>// Copyright (C) 1999-2001, Ruhr-University Bochum.                     //</b>
<b>//                                                                      //</b>
<b>//////////////////////////////////////////////////////////////////////////</b>

#include "RhoSelector/TGoodPhotonSelector.h"

#include "RhoBase/TRho.h"
#include "RhoBase/TCandidate.h"
#include "RhoBase/VAbsMicroCandidate.h"

ClassImp(TGoodPhotonSelector)

TBuffer &amp;operator&gt;&gt;(TBuffer &amp;buf, TGoodPhotonSelector *&amp;obj)
{
   obj = (TGoodPhotonSelector *) buf.ReadObject(TGoodPhotonSelector::Class());
   return buf;
}

#include &lt;iostream&gt;
using namespace std;

<a name="TGoodPhotonSelector:TGoodPhotonSelector"> </a>TGoodPhotonSelector::TGoodPhotonSelector(const char *name, Double_t emc, Int_t nCrys, Double_t lat, Bool_t qc) : 
VAbsPidSelector(name,"gamma") 
{
    SetShowerEnergy(emc,1.E8);
    SetCrystals(nCrys,100000);
    SetLAT(0.0,lat);
    SetPhi(0, kTWOPI);
    SetTheta(0, kTWOPI);
}

<a name="TGoodPhotonSelector:SetCriterion"> </a>void TGoodPhotonSelector::SetCriterion(const char *c)
{
<b>    // Set criteria accroding to </b>
<b>    // http://babar-hn.slac.stanford.edu:5090/HyperNews/get/AnalTools/273.html</b>
    TString crit(c);

    if (crit=="veryLoose" || crit=="loose") {
	<a href="#TGoodPhotonSelector:SetShowerEnergy">SetShowerEnergy</a>(0.03,1.E8);
	<a href="#TGoodPhotonSelector:SetCrystals">SetCrystals</a>(0,100000);
	<a href="#TGoodPhotonSelector:SetLAT">SetLAT</a>(0.0,0.8);
	<a href="#TGoodPhotonSelector:SetPhi">SetPhi</a>(0, kTWOPI);
	<a href="#TGoodPhotonSelector:SetTheta">SetTheta</a>(0, kTWOPI);
    }
    else {
	<a href="#TGoodPhotonSelector:SetShowerEnergy">SetShowerEnergy</a>(0.1,1.E8);
	<a href="#TGoodPhotonSelector:SetCrystals">SetCrystals</a>(0,100000);
	<a href="#TGoodPhotonSelector:SetLAT">SetLAT</a>(0.0,0.8);
	<a href="#TGoodPhotonSelector:SetPhi">SetPhi</a>(0, kTWOPI);
	<a href="#TGoodPhotonSelector:SetTheta">SetTheta</a>(0, kTWOPI);
    }

    VAbsPidSelector::<a href="#TGoodPhotonSelector:SetCriterion">SetCriterion</a>(c);
}

<a name="TGoodPhotonSelector:Accept"> </a><a href="../ListOfTypes.html#Bool_t">Bool_t</a> <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:Accept">TGoodPhotonSelector::Accept</a>(TCandidate&amp; b) 
{
<b>    // The <a href=".././TGoodPhotonSelector.html">TGoodPhotonSelector</a> does a selection based on the</b>
<b>    // quality of a reconstructed charged track</b>
    
    if (&amp;b == 0) return kFALSE;
    if (!<a href="#TGoodPhotonSelector:Accept">Accept</a>(b.GetMicroCandidate())) return kFALSE;
    SetTypeAndMass(b);
    return kTRUE;
}

<a name="TGoodPhotonSelector:Accept"> </a><a href="../ListOfTypes.html#Bool_t">Bool_t</a> <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:Accept">TGoodPhotonSelector::Accept</a>(VAbsMicroCandidate&amp; cand) 
{
<b>    // The <a href=".././TGoodPhotonSelector.html">TGoodPhotonSelector</a> does a selection based on the</b>
<b>    // quality of a reconstructed charged track</b>
    
    if (&amp;cand == 0) return kFALSE;
    
    if (cand.GetCharge() != 0) return kFALSE;
    
<b>    // Check EMC energy deposit    </b>
    <a href="../ListOfTypes.html#Float_t">Float_t</a> emc  = cand.GetEmcCalEnergy();
    if (emc &lt;= <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:emcMin">emcMin</a>) return kFALSE;
    if (emc &gt;  <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:emcMax">emcMax</a>) return kFALSE;
    
<b>    // Cut on number of crystals    </b>
    <a href="../ListOfTypes.html#Int_t">Int_t</a> nc = cand.GetEmcNumberOfCrystals();
    if (nc &lt;= <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:ncMin">ncMin</a>) return kFALSE;
    if (nc &gt;  <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:ncMax">ncMax</a>) return kFALSE;
    
<b>    // Check LAT    </b>
    <a href="../ListOfTypes.html#Float_t">Float_t</a> lat  = cand.GetEmcLateralShape();
    if (lat &lt;= <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:latMin">latMin</a>) return kFALSE;
    if (lat &gt;  <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:latMax">latMax</a>) return kFALSE;
    
<b>    // Check angular acceptance</b>
    
    TVector3 p = cand.GetMomentum();
    if (p.Theta() &lt;  <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:thetaMin">thetaMin</a>) return kFALSE;
    if (p.Theta() &gt;  <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:thetaMax">thetaMax</a>) return kFALSE;
    if (p.Phi()+kPI   &lt;  <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:phiMin">phiMin</a>)   return kFALSE;
    if (p.Phi()+kPI   &gt;  <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:phiMax">phiMax</a>)   return kFALSE;

    return kTRUE;
}

<a name="TGoodPhotonSelector:PrintOn"> </a><a href="../ListOfTypes.html#void">void</a> <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:PrintOn">TGoodPhotonSelector::PrintOn</a>(std::ostream&amp; o) const 
{
    o &lt;&lt; GetName() &lt;&lt; endl;
    if (<a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:emcMin">emcMin</a> &gt; 0)        o &lt;&lt; "EMC energy          = " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:emcMin">emcMin</a> &lt;&lt; " ... " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:emcMax">emcMax</a> &lt;&lt; " GeV" &lt;&lt; endl;
    if (<a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:ncMin">ncMin</a> &gt; 0)         o &lt;&lt; "Number of Crystals  = " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:ncMin">ncMin</a> &lt;&lt; " ... " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:ncMax">ncMax</a> &lt;&lt; endl; 
    if (<a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:latMin">latMin</a> &gt; 0)        o &lt;&lt; "LAT                 = " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:latMin">latMin</a> &lt;&lt; " ... " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:latMax">latMax</a> &lt;&lt; endl;
    if (<a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:thetaMin">thetaMin</a> &gt; 0)      o &lt;&lt; "Theta [Rad]         = " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:thetaMin">thetaMin</a> &lt;&lt; " ... " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:thetaMax">thetaMax</a> &lt;&lt; endl; 
    if (<a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:phiMin">phiMin</a> &gt; 0)        o &lt;&lt; "Phi   [Rad]         = " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:phiMin">phiMin</a> &lt;&lt; " ... " &lt;&lt; <a href=".././TGoodPhotonSelector.html#TGoodPhotonSelector:phiMax">phiMax</a> &lt;&lt; endl; 
    o &lt;&lt; endl;    
}

std::ostream&amp;  operator &lt;&lt; (std::ostream&amp; o, const <a href=".././TGoodPhotonSelector.html">TGoodPhotonSelector</a>&amp; a) { a.<a href="#TGoodPhotonSelector:PrintOn">PrintOn</a>(o); return o; }

</pre>

<!--SIGNATURE-->
<br>
<hr>
<center>
<address>
<a href="http://root.cern.ch/root/Welcome.html">ROOT page</a> - <a href="../ClassIndex.html">Class index</a> - <a href="#TopOfPage">Top of the page</a><br>
</address>
</center>
<hr>
<address>
This page has been automatically generated. If you have any comments or suggestions about the page layout send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>, or contact <a href="mailto:rootdev@root.cern.ch">the developers</a> with any questions or problems regarding ROOT.
</address>
</body>
</html>
