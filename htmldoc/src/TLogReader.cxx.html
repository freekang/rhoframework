<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!--                                             -->
<!-- Author: ROOT team (rootdev@hpsalo.cern.ch)  -->
<!--                                             -->
<!--   Date: Fri Dec 20 16:03:02 2002            -->
<!--                                             -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>TLogReader - source file</title>
<link rev=made href="mailto:rootdev@root.cern.ch">
<meta name="rating" content="General">
<meta name="objecttype" content="Manual">
<meta name="keywords" content="software development, oo, object oriented, unix, x11, windows, c++, html, rene brun, fons rademakers">
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis.">
</head>
<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#551a8b" ALINK="#ff0000" TEXT="#000000">
<a name="TopOfPage"></a>
<pre>
#ifndef TLOGREADER_H
#define TLOGREADER_H
<b>//////////////////////////////////////////////////////////////////////////</b>
<b>//                                                                      //</b>
<b>// <a href=".././TLogReader.html">TLogReader</a>								//</b>
<b>//                                                                      //</b>
<b>// Class to read the output of BABAR's ir2runs, oprruns and lumi	//</b>
<b>// The scanned output is gathered in <a href=".././TLogInfo.html">TLogInfo</a> objects which are stored	//</b>
<b>// in <a href=".././TRunDB.html">TRunDB</a>								//</b>
<b>//                                                                      //</b>
<b>// Author: Thorsten Brandt, Dresden University, Aug. 99			//</b>
<b>// Copyright (C) 1999-2001, Ruhr-University Bochum.			//</b>
<b>//									//</b>
<b>//////////////////////////////////////////////////////////////////////////</b>

#include &lt;iostream&gt;
#include &lt;fstream&gt;

#include "TObject.h"
#include "TDatime.h"
#include "TString.h"
#include "TObjString.h"
#include "TObjArray.h"

class TLogInfo;
class TFile;

class TLogReader : public TObject 
{
  public :
    TLogReader();    
    virtual ~TLogReader();
    void ReadFromFiles(const char *source_path="./",const char *dest="rundb.root");
    void CreateNew(const char *dest="rundb.root",const char *source_path=NULL);
    void Update(const char *dest="rundb.root",const char *source_path=NULL);
    void  WriteToFile(TFile  *file);
    TLogInfo* GetLog(Int_t n) const { return (TLogInfo*) (*fLogInfos)[n]; }
    TLogInfo* GetRun(Int_t n) const;

  private :
    TObjArray *fLogInfos;
};

class TOprEntry : public TObject 
{
  public :
    TOprEntry();
  virtual ~TOprEntry() { };
  Int_t GetRun() const { return fRunNumber; }
  const char* GetCollection() const { return fCollection; }
  Bool_t Done() const { return fDone; }
  Bool_t Kanga() const { return fKanga; }
  const char* GetProcspec() const { return fProcspec; }
  Int_t GetCons() const { return fCons; }
  Int_t GetVersion() const { return fVersion; }
  Bool_t ReadFromFile(std::ifstream &amp;in);
  void PrintOn( std::ostream&amp; o=std::cout ) const;

  private :
    Int_t fRunNumber;
    TString fCollection,fProcspec;
    Bool_t fDone,fKanga;
    Byte_t fCons,fVersion;
};
 

class TIr2Entry : public TObject
{
  public :
    TIr2Entry();
    Bool_t SetContent(char *str);
    virtual ~TIr2Entry();
    Int_t GetRun() const { return fRunNumber; }
    Int_t GetShiftType() const { return fShiftType; }
    Float_t GetLer() const { return fLer; }
    Float_t GetHer() const { return fHer; }
    Int_t  GetYear() const { return fYear; }
    Int_t  GetMonth() const { return fMonth; }
    Int_t  GetDay() const { return fDay; }
    Int_t  GetStartHour() const { return fStartHour; }
    Int_t  GetStartMin() const { return fStartMin; }
    Int_t  GetStopHour() const { return fStopHour; }
    Int_t  GetStopMin() const { return fStopMin; }   
    Int_t  GetRunType() const { return fRunType; }
    Float_t GetSolenoid() const { return fSolenoid; }
    virtual Int_t Compare(const TObject *other) const;
    virtual Bool_t IsSortable() const { return kTRUE; }
   void PrintOn( std::ostream&amp; o=std::cout ) const;
    
  private :
      void PrintTime(Int_t t,std::ostream &amp;o) const;
    Int_t fRunNumber;
    Int_t fYear;
    Byte_t fMonth,fDay;
    Byte_t fStartHour,fStartMin;
    Byte_t fStopHour,fStopMin;
    Int_t fShiftType;
    Int_t fRunType;
    Float_t fLer,fHer,fSolenoid;
};


#endif
</pre>

<!--SIGNATURE-->
<br>
<hr>
<center>
<address>
<a href="http://root.cern.ch/root/Welcome.html">ROOT page</a> - <a href="../ClassIndex.html">Class index</a> - <a href="#TopOfPage">Top of the page</a><br>
</address>
</center>
<hr>
<address>
This page has been automatically generated. If you have any comments or suggestions about the page layout send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>, or contact <a href="mailto:rootdev@root.cern.ch">the developers</a> with any questions or problems regarding ROOT.
</address>
</body>
</html>
